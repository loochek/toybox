; This program will guess your number in range [-1000000; 1000000]
; (even fractional!)

init:
    push -1000000
    push  1000000.001
    pop rdx
    pop rcx
    
loop:
; if we should stop
    push rdx
    push rcx
    sub
    push 0.001
    jle found
; calculate mid and put it to rax
    push rcx
    push rdx
    add
    push 2
    div
    pop rax
; ask player
    push rax
    out
    in
    push 1
    je if_greater_or_equal
    jmp if_less
    
if_greater_or_equal:
    push rax
    pop rcx
    jmp loop

if_less:
    push rax
    pop rdx
    jmp loop
    
found:
    push rcx
    out
    hlt
